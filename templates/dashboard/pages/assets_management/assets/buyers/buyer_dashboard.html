{% extends 'dashboard/layout/base.html' %}

{% load i18n static custom_filters %}

{% block layout_main %}

{% include 'dashboard/pages/assets_management/assets/holders/partials/header.html' %}

<div class="container-xl px-4 mt-n10">
    <div class="row">
        <div class="col-12">
            <div class="card mb-4">
                <div class="card-header">
                    <h2>{% trans 'My Offers' %}</h2>
                </div>
                <div class="card-body">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>{% trans 'ID' %}</th>
                                <th>{% trans 'Asset' %}</th>
                                <th>{% trans 'Quantity' %}</th>
                                <th>{% trans 'Amount (USD)' %}</th>
                                <th>{% trans 'Approved' %}</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for offer in offers %}
                            <tr>
                                <td>{{ offer.id }}</td>
                                <td>{{ offer.asset.asset_name.es_name }}</td>
                                <td>{{ offer.offer_quantity }}</td>
                                <td>{{ offer.offer_amount }}</td>
                                <td>
                                    {% if offer.is_approved %}
                                        <i class="bi bi-check-circle-fill text-success" title="{% trans 'Approved' %}"></i>
                                    {% else %}
                                        <i class="bi bi-x-circle-fill text-danger" title="{% trans 'Not Approved' %}"></i>
                                    {% endif %}
                                </td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="5">{% trans 'No offers found.' %}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-header">
                    <h2>{% trans 'Create a New Offer' %}</h2>
                </div>
                <div class="card-body">
                    <form method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="id_asset" class="form-label">{% trans 'Asset' %}</label>
                                    <select id="id_asset" name="asset" class="form-select">
                                        {% for asset in assets %}
                                            <option value="{{ asset.id }}">
                                                {{ asset.asset_name.es_name }} - ({{ asset.category.es_name }})
                                            </option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="id_offer_type" class="form-label">{% trans 'Offer Type' %}</label>
                                    {{ form.offer_type|add_attrs:"class=form-select" }}
                                </div>
                            </div>
                        
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="id_quantity_type" class="form-label">{% trans 'Quantity Type' %}</label>
                                    {{ form.quantity_type|add_attrs:"class=form-select" }}
                                </div>
                            </div>
                
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="id_offer_amount" class="form-label">{% trans 'Offer Amount (USD)' %}</label>
                                    {{ form.offer_amount|add_attrs:"class=form-control" }}
                                </div>
                            </div>
                        
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="id_offer_quantity" class="form-label">{% trans 'Offer Quantity' %}</label>
                                    {{ form.offer_quantity|add_attrs:"class=form-control" }}
                                </div>
                            </div>
                
                            <div class="col-md-12">
                                <div class="mb-3">
                                    <label for="id_buyer_country" class="form-label">{% trans 'Buyer Country' %}</label>
                                    {{ form.buyer_country|add_attrs:"class=form-select" }}
                                </div>
                            </div>
                    
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="id_es_procedure" class="form-label">{% trans 'Procedure (ES)' %}</label>
                                    {{ form.es_procedure|add_attrs:"class=form-control" }}
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="id_en_procedure" class="form-label">{% trans 'Procedure (EN)' %}</label>
                                    {{ form.en_procedure|add_attrs:"class=form-control" }}
                                </div>
                            </div>
                        
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="id_es_observation" class="form-label">{% trans 'Observation (ES)' %}</label>
                                    {{ form.es_observation|add_attrs:"class=form-control" }}
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="id_en_observation" class="form-label">{% trans 'Observation (EN)' %}</label>
                                    {{ form.en_observation|add_attrs:"class=form-control" }}
                                </div>
                            </div>
                        </div>
                
                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-outline-success">
                                {% trans 'Submit Offer' %}
                            </button>
                        </div>
                    </form>
                </div>
                
            </div>
        </div>
    </div>
</div>
{% endblock %}